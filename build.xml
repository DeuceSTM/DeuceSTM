<?xml version="1.0"?>

<project name="Duece" default="jars" basedir=".">
	
	<target name="jars" depends="asm-jar"/>
	
	<target name="asm-jar" depends="compile">
			<jar destfile="bin/deuceAgent.jar">
				<fileset dir="classes" />
				<manifest>
					<attribute name="Implementation-Vendor" value="deuce.org" />
					<attribute name="Implementation-Version" value="1.0"/>
					<attribute name="Premain-Class" value="org.deuce.transform.asm.Agent" />
					<attribute name="Can-Redefine-Classes" value="true"/>
					<attribute name="Can-Retransform-Classes" value="true"/>
				</manifest>
			</jar>
	</target>
	
	<target name="Tests">
		<junit>
			<classpath>
				<pathelement location="${build.tests}"/>
				<pathelement path="bin/deuceAgent.jar"/>
			</classpath>
		</junit>
	</target>
	
	<!--target name="asm-transformer-jar">
			<jar destfile="bin/transformerAgent.jar">
				<fileset dir="classes" />
				<manifest>
					<attribute name="Implementation-Vendor" value="deuce.org" />
					<attribute name="Implementation-Version" value="0.2"/>
					<attribute name="Premain-Class" value="org.deuce.transform.asm.Transformer" />
					<attribute name="Can-Redefine-Classes" value="true"/>
					<attribute name="Can-Retransform-Classes" value="true"/>
				</manifest>
			</jar>
	</target-->
	
	<target name="compile">
		<javac  fork="true" srcdir="src"  source="1.5" target="1.5"
			destdir="classes"
		 	includes="java/**"
		 	excludes="test/**"/>
	</target>
</project>
